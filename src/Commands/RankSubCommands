package Commands;

import java.io.File;
import java.io.IOException;
import org.bukkit.Bukkit;
import org.bukkit.ChatColor;
import org.bukkit.GameMode;
import org.bukkit.configuration.file.FileConfiguration;
import org.bukkit.configuration.file.YamlConfiguration;
import org.bukkit.entity.Player;

import me.Chris.SwiftlyCrafted.Hub.main;

public class RankSubCommands {

	main plugin;
	public RankSubCommands(main plugin){
		this.plugin = plugin;
	}
	
	@SuppressWarnings("deprecation")
	public void executeregCommand(String s){
		final Player target = Bukkit.getPlayerExact(s);
		File playerFile = new File(this.plugin.getDataFolder() + File.separator + "players" + File.separator + target.getName() + ".yml");
		if(!playerFile.exists()){
		     try {
				playerFile.createNewFile();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} // needs try catch block
		}
		FileConfiguration fc = YamlConfiguration.loadConfiguration(playerFile);
		target.setCanPickupItems(false);
		
		target.setAllowFlight(false);
		target.setOp(false);
		target.setDisplayName(ChatColor.GRAY + target.getName() + ChatColor.WHITE);
		target.setGameMode(GameMode.SURVIVAL);
		target.setExp(0);
		target.setLevel(1);
		target.setFoodLevel(20);
		fc.set("rank", "reg");
		try {
			fc.save(playerFile);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		Bukkit.getServer().getScheduler().scheduleSyncRepeatingTask(this.plugin, new Runnable(){
	        @Override
	        public void run() {
	        	target.setFoodLevel(20);
	    		target.setHealth(20);
	                if(target.getLocation().getBlockY() < 0){
	                	target.teleport(target.getWorld().getSpawnLocation());
	                }
	        }
		}, 0, 1);
	}
	
	@SuppressWarnings("deprecation")
	public void executeModCommand(String s){
		final Player target = Bukkit.getPlayerExact(s);
		File playerFile = new File(this.plugin.getDataFolder() + File.separator + "players" + File.separator + target.getName() + ".yml");
		if(!playerFile.exists()){
		     try {
				playerFile.createNewFile();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} // needs try catch block
		}
		FileConfiguration fc = YamlConfiguration.loadConfiguration(playerFile);
		target.setCanPickupItems(false);
		target.setOp(false);
		target.setExp(0);
		target.setLevel(1);
		target.setFoodLevel(20);
		target.setDisplayName(ChatColor.DARK_PURPLE + "" + ChatColor.BOLD + "Mod " + ChatColor.GRAY + target.getName() + ChatColor.WHITE);
		fc.set("rank", "mod");
		try {
			fc.save(playerFile);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		Bukkit.getServer().getScheduler().scheduleSyncRepeatingTask(this.plugin, new Runnable(){
	        @Override
	        public void run() {
	        	target.setFoodLevel(20);
	    		target.setHealth(20);
	                if(target.getLocation().getBlockY() < 0){
	                	target.teleport(target.getWorld().getSpawnLocation());
	                }
	        }
		}, 0, 1);
	}
	
	
	
	@SuppressWarnings("deprecation")
	public void executeAdminModCommand(String s){
		Player target = Bukkit.getPlayerExact(s);
		File playerFile = new File(this.plugin.getDataFolder() + File.separator + "players" + File.separator + target.getName() + ".yml");
		if(!playerFile.exists()){
		     try {
				playerFile.createNewFile();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} // needs try catch block
		}
		FileConfiguration fc = YamlConfiguration.loadConfiguration(playerFile);
		target.setCanPickupItems(true);
		target.setOp(true);
		target.setExp(0);
		target.setLevel(1);
		target.setFoodLevel(20);
		target.setDisplayName(ChatColor.GREEN + "" + ChatColor.BOLD + "Admin " + ChatColor.GRAY + target.getName() + ChatColor.WHITE);
		fc.set("rank", "admin");
		try {
			fc.save(playerFile);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		Bukkit.getServer().getScheduler().scheduleSyncRepeatingTask(this.plugin, new Runnable(){
	        @Override
	        public void run() {
	        	target.setFoodLevel(20);
	    		target.setHealth(20);
	                if(target.getLocation().getBlockY() < 0){
	                	target.teleport(target.getWorld().getSpawnLocation());
	                }
	        }
		}, 0, 1);
	}
	
	@SuppressWarnings("deprecation")
	public void executeDevCommand(String args){
		final Player target = Bukkit.getPlayerExact(args);
		File playerFile = new File(this.plugin.getDataFolder() + File.separator + "players" + File.separator + target.getName() + ".yml");
		if(!playerFile.exists()){
		     try {
				playerFile.createNewFile();
			} catch (IOException e) {
				// TODO Auto-generated catch block
				e.printStackTrace();
			} // needs try catch block
		}
		FileConfiguration fc = YamlConfiguration.loadConfiguration(playerFile);
		target.setCanPickupItems(true);
		target.setOp(true);
		target.setExp(0);
		target.setLevel(1);
		target.setFoodLevel(20);
		target.setDisplayName(ChatColor.RED + "" + ChatColor.BOLD + "Dev " + ChatColor.GRAY + target.getName() + ChatColor.WHITE);
		fc.set("rank", "dev");
		try {
			fc.save(playerFile);
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		Bukkit.getServer().getScheduler().scheduleSyncRepeatingTask(this.plugin, new Runnable(){
	        @Override
	        public void run() {
	        	target.setFoodLevel(20);
	    		target.setHealth(20);
	                if(target.getLocation().getBlockY() < 0){
	                	target.teleport(target.getWorld().getSpawnLocation());
	                }
	        }
		}, 0, 1);
	}
	
}
